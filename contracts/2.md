现在我的质押收益率全是错的！！！
而不是按照 stHSK 去计算收益率
涉及到的 关键方法

updateRewardPool 
updateRewardPool1
stakeLocked
unstakeLocked
getStakeReward
stakeFlexible
requestUnstakeFlexible




1. 根据 APR值计算权重（但是得有个 min 和 max）
2. 各种质押量 占总质押量的比例
3. 实现 计算修正比例因子 函数
4. copy getHSKForShares函数 实现 getHSKForSharesByType
    原先基础上最后 * 修正因子

--------
问题 1. 之前的过去的区块分配依然不对
问题 2. 我想想min 和 max 限制
---------

## APR值计算权重
maxAPR[PoolType.Flexible] = 180;    // 1.8%
        maxAPR[PoolType.Fixed30Days] = 216; // 2.16%
        maxAPR[PoolType.Fixed90Days] = 270; // 2.7%
        maxAPR[PoolType.Fixed180Days] = 360;// 3.6%
        maxAPR[PoolType.Fixed365Days] = 540;// 5.4%

        // 计算权重
        uint256 baseAPR = maxAPR[PoolType.Flexible]; // 灵活质押的APR作为基准
        for (uint256 i = 0; i < 5; i++) {
            PoolType poolType = PoolType(i);
            poolWeight[poolType] = (maxAPR[poolType] * 10000) / baseAPR;
        }


// 查看权重（可选，用于测试）
function getPoolWeight(PoolType poolType) external view returns (uint256) {
    return poolWeight[poolType];
}


## 查看 每种的质押量 
30: totalSharesByStakeType[0]
90: totalSharesByStakeType[1]
180: totalSharesByStakeType[2]
365:  totalSharesByStakeType[3]
0: totalSharesByStakeType[4]


## 修正比例因子， 根据权重 和 质押量比例 去计算
但是得考虑 min 和 max

--------------------------------
这个参数 传入类型，根据
算出 修改比例因子
最后 再 * 这个修正比例因子
0 和 30 肯定是 小于1
需要 修改 getHSKForShares 方法

 function getHSKForShares(uint256 _sharesAmount) public view returns (uint256) {
        uint256 totalShares = stHSK.totalSupply();
        if (totalShares == 0) {
            return _sharesAmount; // Initial 1:1 exchange rate
        }
        uint256 totalRewards = hskPerBlock * (block.number - startBlock);
        uint256 unClaimedRewards = totalRewards - totalPaidRewards;

        return (_sharesAmount * totalPooledHSK + unClaimedRewards) / totalShares;
    }
    





        // 0  0.055
        // 30 0.115
        // 90  0.3207
        // 180  0.580
        // 365  1.167

        // 518


https://hashkey.blockscout.com/tx/0xcaa7e366b055a1675bfba9cb8196cc6b358b7b6ce27973d317e2d82db539236c
0x66F75DCA1d49bD95b8579d1B16727A81839c987C 两天多一点前质押了  100.08个

100.15
收益 

收益率  11%。



https://hashkey.blockscout.com/tx/0xd81404f4b0f0b1db49e596854b54f671b4e731043abfc81c2edf8e05518c2310?tab=index
0xe3122B11630e18F361F8D87Af49a02349975B338 3,791.31个  365天
现在 3793.83

两天又1/4时间
质押了3,791.31个 现在有3793.83个 年化收益率多少

收益率 11% 左右